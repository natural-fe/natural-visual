<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>子元素</title>
</head>

<body>

  <script src="http://cdn.bootcss.com/d3/3.5.17/d3.js"></script>
  <script>
    // 创建画布svg
    var width = 500,
      height = 500;
    var svg = d3.select("body").append("svg") //在<body>中添加<svg>
      .attr("width", width).attr("height", height); //设定<svg>的高度属性

    // 数据
    var dataset = [10, 10, 100];

    // 分组
    var g = svg.append("g");

    var rect = g.selectAll("rect") // 先选择selectAll
      .data(dataset)
      .enter()
      .append("rect")
      .attr("fill", "steelblue")
      .attr("id", function(d, i) {
        return "rect" + i;
      })
      .attr("x", 10)
      .attr("y", function(d, i) {
        return 10 + i * 35;
      })
      .attr("width", function(d, i) {
        return d;
      })
      .attr("height", 30);

    // 动画效果
    g.transition()
      .selectAll("rect")
      .filter(function(d, i) {
        return i >= 1;
      })
      .attr("width", 300);
  </script>
</body>

</html>
